<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>LMS XII — Predict (Album)</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=League+Gothic&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#efe9df; --paper:#fff; --accent:#ff3a8f; --gold:#d4a031;
  --p1:#0047FF; --p2:#D4112E; --p3:#00B063; --p4:#6A00FF;
  --p5:#FF7A00; --p6:#00D6FF; --p7:#FF2EC7; --p8:#FFD800;
  --panel-w: 860px; --panel-h:480px;
  --max-w:1120px;
}
*{box-sizing:border-box}
body{ margin:0; font-family:"League Gothic", Arial, sans-serif; background:var(--bg); color:#111; -webkit-font-smoothing:antialiased; display:flex; justify-content:center; padding:32px 18px;}
.container{ width:100%; max-width:var(--max-w); }
.header{ text-align:center; margin-bottom:18px; }
.nav{ display:flex; justify-content:center; gap:22px; margin-bottom:8px; }
.nav a{ font-weight:700; font-size:18px; text-transform:uppercase; font-style:italic; color:#111; text-decoration:none; }
.nav a.current{ color:var(--accent); }
h1.title{ font-family:"Bebas Neue",sans-serif; font-weight:400; font-size:clamp(100px,12vw,160px); margin:12px 0; padding:12px; border:6px solid transparent; border-image: linear-gradient(90deg,var(--accent),#00f2ff,#ffd400) 1; border-radius:10px; display:inline-block; box-shadow: inset 0 -8px 18px rgba(0,0,0,0.06); }
.tag{ text-transform:uppercase; font-weight:900; color:var(--accent); margin-bottom:12px; }

/* pick controls */
.controls{ background:var(--paper); padding:12px; border-radius:10px; box-shadow:0 12px 36px rgba(0,0,0,0.06); margin-bottom:12px; border:3px solid rgba(0,0,0,0.03); display:flex; gap:12px; flex-wrap:wrap; align-items:center; justify-content:center;}
.control-input{ min-width:190px; padding:8px 10px; border-radius:8px; border:1px solid #ddd; font-weight:700; text-transform:uppercase; }

/* player nav */
.player-nav{ display:flex; gap:8px; flex-wrap:wrap; justify-content:center; margin:12px 0; }
.player-nav button{ border:none; padding:10px 14px; border-radius:8px; font-weight:900; color:#fff; text-transform:uppercase; cursor:pointer; box-shadow:0 8px 22px rgba(0,0,0,0.12); }

/* carousel */
.carousel-wrap{ background:var(--paper); border-radius:12px; padding:14px; box-shadow:0 16px 48px rgba(0,0,0,0.12); border:3px solid rgba(0,0,0,0.03); overflow:hidden; }
.carousel{ display:flex; gap:18px; overflow-x:auto; scroll-snap-type:x mandatory; padding-bottom:12px; -webkit-overflow-scrolling:touch; }
.panel{ flex:0 0 var(--panel-w); width:var(--panel-w); height:var(--panel-h); background:linear-gradient(180deg,#fff,#fff); border-radius:12px; display:grid; grid-template-columns:260px 1fr; gap:16px; padding:16px; box-shadow:0 12px 36px rgba(0,0,0,0.08); border:6px solid rgba(0,0,0,0.03); scroll-snap-align:start; position:relative; }

/* sticker flip card */
.flip-card{ width:240px; height:360px; perspective:1200px; margin:auto; }
.flip-inner{ position:relative; width:100%; height:100%; transition: transform 700ms cubic-bezier(.2,.9,.3,1); transform-style:preserve-3d; }
.flip-inner.is-flipped{ transform: rotateY(180deg); }
.flip-face{ position:absolute; width:100%; height:100%; backface-visibility:hidden; border:6px solid #f4efea; border-radius:8px; display:flex; align-items:center; justify-content:center; font-weight:900; text-transform:uppercase; font-size:14px; box-shadow:0 10px 26px rgba(0,0,0,0.12); }
.flip-front{ background:linear-gradient(180deg,#fff,#fbfbfb); }
.flip-back{ transform: rotateY(180deg); background:linear-gradient(180deg,#fff,#f6f6f6); padding:12px; text-align:center; }

/* gold plaque for totals */
.plaque{ position:absolute; right:18px; top:18px; background:linear-gradient(180deg,#f3d78a,#d4a031); padding:6px 12px; border-radius:8px; font-weight:900; text-transform:uppercase; box-shadow:0 8px 18px rgba(0,0,0,0.14); }

/* right column */
.right{ display:flex; flex-direction:column; gap:10px; }
.fixtures{ display:flex; flex-wrap:wrap; gap:8px; }
.team{ padding:8px 12px; border-radius:8px; font-weight:900; color:#fff; text-transform:uppercase; min-width:120px; display:inline-flex; align-items:center; justify-content:center; }

/* picked list */
.picked-list{ padding:8px; border-radius:8px; border:1px dashed #eee; background:#fafafa; min-height:64px; font-weight:700; }

/* points grid compact */
.points-grid table{ width:100%; border-collapse:collapse; }
.points-grid th, .points-grid td{ padding:6px 8px; border-bottom:1px solid #eee; font-size:13px; text-align:center; }

/* responsive adjustments */
@media(max-width:980px){ :root{ --panel-w:760px; --panel-h:560px; } }
@media(max-width:680px){
  :root{ --panel-w:320px; --panel-h:640px; }
  .panel{ grid-template-columns: 1fr; height:auto; padding-bottom:24px; }
  .flip-card{ margin:12px auto; }
}
</style>
</head>
<body>
  <div class="container">
    <div class="header">
      <nav class="nav"><a href="index.html">Home</a><a href="predict.html" class="current">Predict</a><a href="table.html">Table</a><a href="rules.html">Rules</a></nav>
      <h1 class="title">LMS XII</h1>
      <div class="tag">CHOOSE <s>LIFE</s> HARV</div>
    </div>

    <div class="controls">
      <select id="top-name" class="control-input"><option value="">-- name --</option><option>BILLY</option><option>CROSBO</option><option>INGZ</option><option>KABZ</option><option>KIT</option><option>LOCKY</option><option>STOOBZ</option><option>T-CITY</option></select>
      <select id="top-team" class="control-input"><option value="">-- team --</option><option>Arsenal</option><option>Man City</option><option>Man Utd</option><option>Liverpool</option><option>Spurs</option></select>
      <input id="top-player" class="control-input" placeholder="Player (eg Haaland)">
      <button id="submitPick" class="control-input" style="background:#111;color:#fff;">Submit Pick</button>
    </div>

    <div class="player-nav" style="text-align:center;margin-bottom:12px;" id="playerButtons"></div>

    <div class="carousel-wrap">
      <div class="carousel" id="carousel"></div>
    </div>
  </div>

<script>
/* Build panels (keeps same data and behavior but now uses flip cards + new visuals).
   Persists to localStorage keys: lms_picks and lms_totals */
document.addEventListener('DOMContentLoaded', () => {
  const PLAYERS = [
    {id:'BILLY', color:getComputedStyle(document.documentElement).getPropertyValue('--p1')||'#0047FF'},
    {id:'CROSBO', color:getComputedStyle(document.documentElement).getPropertyValue('--p2')||'#D4112E'},
    {id:'INGZ', color:getComputedStyle(document.documentElement).getPropertyValue('--p3')||'#00B063'},
    {id:'KABZ', color:getComputedStyle(document.documentElement).getPropertyValue('--p4')||'#6A00FF'},
    {id:'KIT', color:getComputedStyle(document.documentElement).getPropertyValue('--p5')||'#FF7A00'},
    {id:'LOCKY', color:getComputedStyle(document.documentElement).getPropertyValue('--p6')||'#00D6FF'},
    {id:'STOOBZ', color:getComputedStyle(document.documentElement).getPropertyValue('--p7')||'#FF2EC7'},
    {id:'T-CITY', color:getComputedStyle(document.documentElement).getPropertyValue('--p8')||'#FFD800'}
  ];

  const FIXTURES = [
    {home:'Man Utd', away:'Man City'}, {home:'Chelsea', away:'Brentford'}, {home:'Leeds', away:'Fulham'},
    {home:'Liverpool', away:'Burnley'}, {home:'Sunderland', away:'Palace'}, {home:'Tottenham', away:'West Ham'},
    {home:'Forest', away:'Arsenal'}, {home:'Wolves', away:'Newcastle'}, {home:'Aston Villa', away:'Everton'},
    {home:'Brighton', away:'Bournemouth'}
  ];

  const carousel = document.getElementById('carousel');
  const playerButtons = document.getElementById('playerButtons');
  const savedPicks = JSON.parse(localStorage.getItem('lms_picks')||'{}');
  const totals = JSON.parse(localStorage.getItem('lms_totals')||'{}');

  PLAYERS.forEach(p=>{
    // create nav button
    const btn = document.createElement('button');
    btn.textContent = p.id; btn.style.background = p.color.trim();
    btn.style.border = 'none'; btn.style.padding = '10px 14px'; btn.style.borderRadius='8px';
    btn.style.fontWeight='900'; btn.style.color='#fff'; btn.setAttribute('data-player', p.id);
    playerButtons.appendChild(btn);

    // create panel
    const panel = document.createElement('div'); panel.className='panel'; panel.id='panel-'+p.id;
    // plaque total
    const plaque = document.createElement('div'); plaque.className='plaque'; plaque.id = p.id+'-plaque';
    plaque.textContent = (totals[p.id]||0) + ' pts';
    panel.appendChild(plaque);

    // left flip sticker
    const left = document.createElement('div');
    left.innerHTML = `<div class="flip-card"><div class="flip-inner" id="flip-${p.id}">
        <div class="flip-face flip-front" style="border-color:${p.color}"><div style="width:180px;height:260px;background:${p.color};display:flex;align-items:center;justify-content:center;font-weight:900;color:#fff;border-radius:6px;">${p.id}<br>PORTRAIT</div></div>
        <div class="flip-face flip-back" style="border-color:${p.color};"><div style="font-weight:900;color:#111;">History / Picks<br><small style="font-weight:700;color:#666;">Flip to see</small></div></div>
      </div></div>
      <div class="sticker-info" style="border-color:${p.color};margin-top:12px;font-weight:700;text-transform:uppercase;">
        <div>Team: <span id="${p.id}-team">—</span></div>
        <div style="margin-top:6px;">Player: <span id="${p.id}-player">—</span></div>
      </div>`;
    panel.appendChild(left);

    // right content
    const right = document.createElement('div'); right.className='right';
    right.innerHTML = `<div class="fixtures" id="${p.id}-fixtures"></div>
      <div class="picked-list" id="${p.id}-pickedList"><strong>Picks</strong><div id="${p.id}-pickedInner"></div></div>
      <div class="points-grid"><table><thead><tr><th>Week</th><th>Team</th><th>Team pts</th><th>Player</th><th>Player pts</th><th>Week total</th></tr></thead><tbody id="${p.id}-tbody"></tbody></table></div>`;
    panel.appendChild(right);

    carousel.appendChild(panel);

    // fixtures populate
    const fx = panel.querySelector(`#${p.id}-fixtures`);
    FIXTURES.forEach(f=>{
      const el = document.createElement('div'); el.className='team'; el.textContent = `${f.home} v ${f.away}`; el.style.background = p.color.trim();
      fx.appendChild(el);
    });

    // weeks rows
    const tbody = panel.querySelector(`#${p.id}-tbody`);
    for(let i=1;i<=17;i++){
      const tr = document.createElement('tr'); tr.innerHTML = `<td>${i}</td><td>—</td><td>—</td><td>—</td><td>—</td><td>—</td>`;
      tbody.appendChild(tr);
    }

    // fill picks from storage
    const inner = panel.querySelector(`#${p.id}-pickedInner`);
    inner.innerHTML = '';
    if(savedPicks[p.id] && savedPicks[p.id].length){
      savedPicks[p.id].forEach(pk=>{
        const d = document.createElement('div'); d.style.padding='6px 0'; d.textContent = `${pk.week?('Wk '+pk.week+' · '):''}${pk.team} · ${pk.player} · pts: ${pk.pts||'—'}`;
        inner.appendChild(d);
      });
    } else inner.innerHTML = '<em>No picks yet</em>';

    // button click scroll to panel
    btn.addEventListener('click', ()=> {
      carousel.scrollTo({ left: panel.offsetLeft - 8, behavior:'smooth' });
      document.querySelectorAll('#playerButtons button').forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
    });

    // flip on sticker click (front/back)
    panel.querySelector('.flip-inner').addEventListener('click', (ev)=>{
      ev.currentTarget.classList.toggle('is-flipped');
    });
  });

  // highlight nav while scrolling
  const navs = Array.from(document.querySelectorAll('#playerButtons button'));
  const panels = Array.from(document.querySelectorAll('.panel'));
  const onScroll = ()=>{
    const left = carousel.scrollLeft;
    let closest = 0, min=Infinity;
    panels.forEach((p,i)=>{ const d = Math.abs(p.offsetLeft - left); if(d<min){min=d;closest=i;} });
    navs.forEach(n=>n.classList.remove('active')); if(navs[closest]) navs[closest].classList.add('active');
  };
  carousel.addEventListener('scroll', throttle(onScroll, 100));

  function throttle(fn, t){ let last=0; return (...a)=>{ const now=Date.now(); if(now-last>t){ last=now; fn(...a); last=now; } }; }

  // Pick submission persists and updates UI
  document.getElementById('submitPick').addEventListener('click', ()=>{
    const name = document.getElementById('top-name').value;
    const team = document.getElementById('top-team').value;
    const player = document.getElementById('top-player').value.trim();
    if(!name || !team || !player){ alert('Please choose name, team and player'); return; }
    const week = prompt('Gameweek number (optional):','');
    const ptsInput = prompt('Player points for this pick (optional):','');
    const pts = ptsInput ? parseInt(ptsInput,10) : null;

    // update storage
    const saved = JSON.parse(localStorage.getItem('lms_picks') || '{}');
    if(!saved[name]) saved[name]=[];
    saved[name].push({week: week||null, team, player, pts});
    localStorage.setItem('lms_picks', JSON.stringify(saved));

    if(pts){
      const totals = JSON.parse(localStorage.getItem('lms_totals')||'{}');
      totals[name] = (totals[name]||0) + pts;
      localStorage.setItem('lms_totals', JSON.stringify(totals));
      const plaque = document.getElementById(name+'-plaque'); if(plaque) plaque.textContent = totals[name] + ' pts';
    }

    // update UI for that player's panel
    const pickList = document.getElementById(name+'-pickedInner');
    if(pickList){
      if(pickList.querySelector('em')) pickList.innerHTML='';
      const d = document.createElement('div'); d.style.padding='6px 0'; d.textContent = `${week?('Wk '+week+' · '):''}${team} · ${player} · pts: ${pts||'—'}`;
      pickList.appendChild(d);

      const teamSpan = document.getElementById(name+'-team'); if(teamSpan) teamSpan.textContent = team;
      const playerSpan = document.getElementById(name+'-player'); if(playerSpan) playerSpan.textContent = player;
    }

    alert('Pick saved (demo).');

  });

}); // DOMLoaded
</script>
</body>
</html>
